


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta charset="utf-8" />
<title>其他收货单全部入库单</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<link rel="stylesheet" href="/JLPSI/junlin/css/bootstrap.min.css" />
		<link rel="stylesheet" href="/JLPSI/junlin/css/ace.min.css" />
		<link rel="stylesheet" href="/JLPSI/junlin/css/style.css" />
		<link rel="stylesheet" href="/JLPSI/junlin/css/style_i.css" />
		<link rel="stylesheet" href="/JLPSI/junlin/font/css/font-awesome.min.css" />
		<link rel="stylesheet" href="/JLPSI/junlin/js/layer3.1.1/theme/default/layer.css" />
		<!--[if IE 7]>
		  <link rel="stylesheet" href="/JLPSI/junlin/font/css/font-awesome-ie7.min.css" />
		  <link rel="stylesheet" href="/JLPSI/junlin/css/ace-ie.min.css" />
		<![endif]-->

		<link rel="stylesheet" href="/JLPSI/junlin/css/mine/all.css" />
		<link rel="stylesheet" href="/JLPSI/junlin/css/mine/public.css" />

		<script src="/JLPSI/junlin/js/jquery-1.10.2.min.js"></script>
		<!--<script src="/JLPSI/junlin/js/bootstrap.min.js"></script>-->
		<script src="/JLPSI/junlin/js/typeahead-bs2.min.js"></script>
		<script src="/JLPSI/junlin/js/jquery.dataTables.min.js"></script>
		<script src="/JLPSI/junlin/js/jquery.dataTables.bootstrap.js"></script>
		<script src="/JLPSI/junlin/js/layer3.1.1/layer.js" type="text/javascript"></script>
		<script src="/JLPSI/junlin/js/laydate/laydate.js" type="text/javascript"></script>
		<script src="/JLPSI/junlin/script/public.js" type="text/javascript"></script>
		<script src="/JLPSI/junlin/js/date.js" type="text/javascript"></script>
		<script src="/JLPSI/junlin/script/DetailBill-2.2.js" type="text/javascript"></script>


<style>
#editDiv {
	padding-top: 20px;
}
#query_time{
			width:190px
			}
</style>
</head>

<body class="content">
	<div class="page-content clearfix">
		<div id="Member_Ratings">
			<div class="d_Confirm_Order_style" style="margin-top: 10px;">
				<h4 class="text-title">其他收货单全部入库单</h4>
				<div class="search-div clearfix">
					<div class="clearfix">
						<span class="l_f"> 单号： <input type="text" value=""  id="query_identifier"/>
						</span> <span class="l_f"> 供应商名称： <input type="text" value="" id="query_supctoId"/>
						</span> <span class="l_f"> 货品名称： <input type="text" value="" id="query_goodsName"/>
						</span>
							<span class="l_f" style="margin-left:19px"> 
							起止时间： <input type="text"  value="" id="query_time" placeholder="请选择时间" readonly=""  />
						</span>
						<span class="l_f"> 
							状态：<select id="query_state" name="">
								<option value="-1" selected="selected">--请选择--</option>
								<option value="9" >已全部入库</option>
								<option value="7">已开单</option>	
							</select>
						</span>
						 <span class="r_f"> <input type="button"
							class="btncss btn_search" value="搜索"  id="btn_search"/>
						</span>
					</div>

				</div>
				<div class="opration-div clearfix"></div>
				<div class="table_menu_list">
					<table class="table table-striped table-hover col-xs-12"
						id="datatable">
						<thead class="table-header">
							<tr>
								<th>单号</th>
								<th>供应商</th>
								<th>货品名称</th>
								<th>业务单价</th>
								<th>订货数量</th>
								<th>价税合计</th>
								<th>日期</th>
								<th>状态</th>
								<th>app订单</th>
								<th width="20%">操作</th>
							</tr>

						</thead>
						<tbody>
							<!-- <tr>
									<td>
										<span class="look-span" onclick="WarehouseReceiptDetail()">PO.2017.09.00054</span>
									</td>
									<td>嘉和</td>
									<td>椒叶黄瓜</td>
									<td>9.8</td>
									<td>300</td>
									<td>2940</td>
									<td>2017.10.02</td>
									<td>已完成</td>
									<td>
										<input type="button" class="btncss edit" onclick="WarehouseReceiptDetail()" value="详情" />
									</td>
								</tr> -->
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	<!--详情 -->
	<div id="lookDiv" style="display: none;">
		<form class="container">
			<div class="row jl-title">
				<span>基本信息</span>
			</div>
			<div class="row jl-panel">
				<div class="col-xs-6">
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">日期：</label>
						<div class="col-xs-8" id="look_generateDate">123456</div>
					</div>
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">供应商：</label>
						<div class="col-xs-8" id="look_supctoId">123456</div>
					</div>
					<div id="purchaseOrderDiv1" class="hidden">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">有效期至：</label>
							<div class="col-xs-8" id="look_effectivePeriodEnd">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">合同号：</label>
							<div class="col-xs-8" id="look_contractNumber">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">到货时间：</label>
							<div class="col-xs-8" id="look_goodsArrivalTime">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">到货地址：</label>
							<div class="col-xs-8" id="look_goodsArrivalPlace">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">付款方式：</label>
							<div class="col-xs-8" id="look_payType">123456</div>
						</div>
					</div>
				</div>
				<div class="col-xs-6">
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">单号：</label>
						<div class="col-xs-8" id="look_identifier">123456</div>
					</div>
					<div id="purchaseOrderDiv2" class="hidden">
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">订货人：</label>
							<div class="col-xs-8" id="look_orderer">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">运输方式：</label>
							<div class="col-xs-8" id="look_transportationMode">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">送货人：</label>
							<div class="col-xs-8" id="look_deliveryman">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">传真：</label>
							<div class="col-xs-8" id="look_fax">123456</div>
						</div>
						<div class="form-group">
							<label for="" class="col-xs-4 control-label">联系电话：</label>
							<div class="col-xs-8" id="look_phone">123456</div>
						</div>
						<div class="form-group" id="look_prepaidAmount_div">
							<label for="" class="col-xs-4 control-label">预付金额：</label>
							<div class="col-xs-8" id="look_prepaidAmount">123456</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row jl-title">
				<span>合计</span>
			</div>
			<div class="row jl-panel">
				<div class="col-xs-6">
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">订货数量：</label>
						<div class="col-xs-8" id="look_total_orderNum">123456</div>
					</div>
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">税额：</label>
						<div class="col-xs-8" id="look_total_amountOfTax">123456</div>
					</div>
				</div>
				<div class="col-xs-6">
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">价税合计：</label>
						<div class="col-xs-8" id="look_total_totalTaxPrice">123456</div>
					</div>

				</div>
			</div>
			
			<div class="row jl-title">
				<span>商品</span>
			</div>
			<div id="look_goodDiv"></div>


			
			<div class="row jl-title">
				<span>其他</span>
			</div>
			<div class="row jl-panel">
				<div class="col-xs-6">
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">部门：</label>
						<div class="col-xs-8" id="look_departmentId">123456</div>
					</div>
					<!-- <div class="form-group">
						<label for="" class="col-xs-4 control-label">审核人：</label>
						<div class="col-xs-8" id="look_reviewer">123456</div>
					</div> -->

					<div class="form-group">
						<label for="" class="col-xs-4 control-label">摘要：</label>
						<div class="col-xs-8" id="look_summary">123456</div>
					</div>
				</div>
				<div class="col-xs-6">
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">制单人：</label>
						<div class="col-xs-8" id="look_originator">123456</div>
					</div>
					<!-- <div class="form-group">
						<label for="" class="col-xs-4 control-label">终止审核人：</label>
						<div class="col-xs-8" id="look_terminator">123456</div>
					</div> -->
					<div class="form-group">
						<label for="" class="col-xs-4 control-label">分支机构：</label>
						<div class="col-xs-8" id="look_branch">123456</div>
					</div>
				</div>
			</div>
			<div id="accountShowDiv">
				<div class="row jl-title">
					<span>付款凭证</span>
				</div>
				<div class="row jl-panel">
					<div class="col-xs-12" id="picContent"></div>
				</div>
			</div>
		</form>


	</div>

</body>

<script>
	
	var oTable1;
	$("#btn_search").click(function() {
		
		$("#checkAll").removeAttr("checked");
		oTable1.fnDraw();
	});
	jQuery(function($) {
		laydate.render({
			elem: "#query_time",
			range:'~'
		});
		//datatable赋值
		oTable1 = $('#datatable')
			.dataTable({
				"aaSorting": [
					[0, "desc"]
				], //默认第几个排序
				"bStateSave": false, //状态保存
				"bLengthChange": false, //改变每页显示数据数量
				"bFilter": false, //列搜索
				"iDisplayLength": 10, //默认每页显示的记录数
				"iDisplayStart": 0,
				"bServerSide": true, //是否开启服务端查询
				"sDom": 't<"row"<"col-sm-6"i><"col-sm-6"p>>',
				"ajax": {
					"type": "post",
					"dataType": "json",
					"async": false,
					"data": function(d) {
						return $.extend({}, d, {
							//添加额外的参数传给服务器(可以多个)
							"page":25,
							"identifier": $("#query_identifier").val(),
							"commodityName": $("#query_goodsName").val(),
							"supctoName": $("#query_supctoId").val(),
							"planOrOrder":3,
							"queryTime":$("#query_time").val(),
							"state":$("#query_state").val()
								
						});
					},
					"url": "/JLPSI/purchase/procuretable/getProcureTableMsg21"
							},

							"aoColumns" : [
									
									{
										"mData" : "identifier",
										"bSortable" : false,
										"sWidth" : "15%",
										"sClass" : "center",
										"mRender" : function(data, type, row) {
											return '<td><span class="look-span" onclick="WarehouseReceiptDetail('
													+ row.id
													+ ')">'
													+ data
													+ '</span></td>';
										}
									},
									{
										"mData" : "supctoId",
										"bSortable" : false,
										"sWidth" : "10%",
										"sClass" : "center",
										"mRender" : function(data, type, row) {
											if(row.isOtherReceipts!=1){
												if (row.supcto != null) {
													return row.supcto.name;
												} else {
													return "";
												}
											}
											else{
												return "其他";
											}
										}

									},
									{
										"mData" : "commoditysName",
										"bSortable" : false,
										"sWidth" : "10%",
										"sClass" : "center"
									},
									{
										"mData" : "businessUnitPrices",
										"bSortable" : false,
										"sWidth" : "8%",
										"sClass" : "center"

									},
									{
										"mData" : "orderNums",
										"bSortable" : false,
										"sWidth" : "8%",
										"sClass" : "center"

									},
									{
										"mData" : "totalTaxPrices",
										"bSortable" : false,
										"sWidth" : "10%",
										"sClass" : "center",
										"mRender": function(data) {
											if(data!="null"){
												return data;
											}else{
												return 0;
											}
											
										}

									},
									{
										"mData" : "generateDate",
										"bSortable" : false,
										"sWidth" : "10%",
										"sClass" : "center",
										"mRender": function(data) {
											return getSmpFormatDateByLong(data, true);
										}
									},
									{
										"mData" : "state",
										"bSortable" : false,
										"sWidth" : "8%",
										"sClass" : "center",
										"mRender" : function(data, type, row) {

											switch (data) {
											case 1:
												return "未送审";
												break;
											case 2:
												return "待审核";
												break;
											case 3:
												return "已通过";
												break;
											case 4:
												return "已驳回";
												break;
											case 5:
												return "待付款";
												break;
											case 6:
												return "已付款";
												break;
											case 7:
												return "已撤销";
												break;
											case 8:
												return "终止审核中";
												break;
											case 9:
												return "终止审核通过";
												break;
											case 10:
												return "终止审核驳回";
												break;
											case 11:
												return "部分入库";
												break;
											case 12:
												return "已全部入库";
												break;
											case 13:
												return "已开单";
												break;
											default:
												break;
											}
										}

									},
									
									{
										"mData" : "isAppOrder",
										"bSortable" : false,
										"sWidth" : "10%",
										"sClass" : "center",
										"mRender": function(data) {
											if(data!="2"){
												return "否";
											}else{
												return "是";
											}
											
										}

									},

									{
										"mData" : "id",
										"bSortable" : false,
										"sWidth" : "20%",
										"sClass" : "center",
										"mRender" : function(data, type, row) {
											
											return '<td><input type="button" class="btncss edit" onclick="WarehouseReceiptDetail('+data+')" value="详情" /></td>'
												
										}
									} ],
							"oLanguage" : {
								// 国际化配置
								"sLengthMenu" : "每页显示 _MENU_ 条记录",
								"sZeroRecords" : "没有数据记录",
								"sInfo" : "从 _START_ 到  _END_ 条记录 总记录数为 _TOTAL_ 条",
								"sInfoEmpty" : "",
								"sInfoFiltered" : "(全部记录数 _MAX_ 条)",
								"oPaginate" : {
									"sFirst" : "首页",
									"sPrevious" : "前一页",
									"sNext" : "后一页",
									"sLast" : "尾页"
								}
							}
						});
	
	});
		
		/*详情*/
		function WarehouseReceiptDetail(id) {
			
			$.ajax({
				type: "post",
				url: "/JLPSI/purchase/procuretable/inputOrderDetail",
				dataType : "json",
				data: {
					"id" : id
				},
				success: function(res) {
					let bill = new DetailBill(res);
					let $content = bill.toPrint();
					$("#lookDiv").html($content);
				}
			});
			layer.open({
				type: 1,
				title: "入库单详情",
				closeBtn: 1,
				area: ['100%', '100%'],
				content: $("#lookDiv"),
				btn: ['关闭'],
				end: function(){
					$("#look_goodDiv").html("");
				}
			});
		}
		
		
		/* 给商品详情添加div */
		function appendGoodsDiv(index){	
			
			let goodsDiv=`	<div class="row jl-panel" id="goodsMsg`+index+`">
			<div class="col-xs-6">
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">规格编码：</label>
				<div class="col-xs-8 look_commodity_identifier">123456</div>
			</div>
			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">规格：</label>
				<div class="col-xs-8 look_commodity_specifications">123456</div>
			</div>
			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">单位：</label>
				<div class="col-xs-8  look_commodity_unit">123456</div>
			</div>
			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">到货数量：</label>
				<div class="col-xs-8 look_procureCommodity_arrivalQuantity">123456</div>
			</div>
			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">折扣%：</label>
				<div class="col-xs-8 look_procureCommodity_discount">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">税率：</label>
				<div class="col-xs-8 look_procureCommodity_taxRate">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">价税合计：</label>
				<div class="col-xs-8 look_procureCommodity_totalTaxPrice">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">中止数量：</label>
				<div class="col-xs-8 look_procureCommodity_suspendQuantity">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">备注：</label>
				<div class="col-xs-8 look_procureCommodity_remarks">123456</div>
			</div>
			<!-- <div class="form-group">
				<label for="" class="col-xs-4 control-label">赠品：</label>
				<div class="col-xs-8 look_procureCommodity_isLargess">123456</div>
			</div> -->
			<!--<div class="form-group">
				<label for="" class="col-xs-4 control-label">到货日期：</label>
				<div class="col-xs-8 look_procureCommodity_arrivalDate">123456</div>
			</div>-->

		</div>
		<div class="col-xs-6">
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">货品名称：</label>
				<div class="col-xs-8 look_commodity_name">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">品牌：</label>
				<div class="col-xs-8 look_commodity_brand">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">订货数量：</label>
				<div class="col-xs-8 look_procureCommodity_orderNum">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">原始单价：</label>
				<div class="col-xs-8 look_procureCommodity_originalUnitPrice">123456</div>
			</div>
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">业务单价：</label>
				<div class="col-xs-8 look_procureCommodity_businessUnitPrice">123456</div>
			</div>

			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">税额：</label>
				<div class="col-xs-8 look_procureCommodity_amountOfTax">123456</div>
			</div>
			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">批号：</label>
				<div class="col-xs-8 look_procureCommodity_lotNumber">123456</div>
			</div>
			
			<div class="form-group">
				<label for="" class="col-xs-4 control-label">中止金额：</label>
				<div class="col-xs-8 look_procureCommodity_suspendPrice">123456</div>
			</div>
			
			
			

		</div>
	</div>`
		
		$("#look_goodDiv").append(goodsDiv);
		}
		
		
	</script>
</html>